# Техническое решение реализации внутрисистемных уведомлений

Получение уведомлений реализовать через API.

## 1. Триггеры событий:
- При срабатывании триггера (пройден курс, защищен грейд, подтвержден навык, отправлен на пересдачу) создается задача на отправку уведомления через брокер сообщений.

## 2. Брокер сообщений:
- Используется для асинхронной передачи событий на отправку уведомления, например, RabbitMQ.
- Использовать очередь internal-notifications.

## 3. Notification-сервис:
- Подписан на очередь сообщений. Сервис получает событие, генерирует уведомление и сохраняет его в базе данных с идентификатором пользователя, датой создания и статусом "не прочитано".
- При запросе уведомлений сервис возвращает все уведомления из базы данных указанному пользователю со статусом "не прочитано", устанавливает дату прочтения и меняет статус на "прочитано".

---

# Конфигурация RabbitMQ в Docker Compose

```yaml
name: be-better
services:
  rabbitmq:
    image: rabbitmq:4.0.3-management-alpine
    ports:
      - "${BROKER_PORT}:${BROKER_PORT}"
      - "${BROKER_UI_PORT}:${BROKER_UI_PORT}"
    environment:
      RABBITMQ_DEFAULT_USER: ${RABBITMQ_USER}
      RABBITMQ_DEFAULT_PASS: ${RABBITMQ_PASSWORD}
    networks:
      - app-network
```

# Переменные окружения

```dotenv
BROKER_PORT=5672
BROKER_UI_PORT=15672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=guest
```
